# Development Skeleton with Soba

A modern development environment template with GitHub Issue-driven development support powered by [Soba](https://github.com/douhashi/soba).

## Features

- **DevContainer Ready**: Pre-configured VS Code DevContainer with Ubuntu 24.04
- **Soba Integration**: GitHub Issue-driven TDD workflow built-in
- **Flexible Port Configuration**: Dynamic port forwarding based on project needs
- **Modern Tooling**: Node.js LTS, GitHub CLI, Docker-in-Docker, tmux, Neovim
- **Claude Code Support**: AI-assisted development with specialized agents

## Quick Start

### 1. Initialize Your Project

Before opening in DevContainer, you **must** initialize the project:

```bash
# Clone this template
git clone https://github.com/yourusername/your-project.git
cd your-project

# Initialize project configuration
.devcontainer/bin/init
```

The init script will:
- Ask for your project type (Web App, CLI Tool, Library, or Custom)
- Configure port forwarding if needed
- Generate `compose.yaml` file (gitignored)

### 2. Open in DevContainer

**Option A: VS Code**
```bash
code .
# Then: Ctrl+Shift+P → "Dev Containers: Reopen in Container"
```

**Option B: DevContainer CLI**
```bash
devcontainer up --workspace-folder .
devcontainer exec --workspace-folder . bash
```

## Project Types

### Web Application
- Configures port forwarding for your app
- Common ports: 3000 (frontend), 8080 (API), 5432 (database)

### CLI Tool
- No port configuration needed
- Minimal container overhead

### Library/Package
- No port configuration needed
- Focus on testing and documentation

### Custom
- Full control over configuration
- Mix and match features as needed

## Port Configuration

Ports are managed through initialization:

1. **During init**: Specify which ports your app needs
2. **Generated files**:
   - `.devcontainer/compose.yaml` - Docker Compose with port mapping
   - `.devcontainer/devcontainer.local.json` - VS Code port forwarding
3. **To reconfigure**: Run `.devcontainer/bin/init` again

## File Structure

```
.devcontainer/
├── bin/
│   └── init                    # Project initialization script
├── compose.yaml                 # Generated Docker config (gitignored)
├── compose.yaml.template        # Docker Compose template
├── devcontainer.json            # VS Code DevContainer config
├── devcontainer.local.json      # Generated VS Code config (gitignored)
└── scripts/
    └── setup.sh                 # Container setup script

.claude/
└── agents/                      # Claude Code agent configurations
```

## Working with Soba

Soba enables GitHub Issue-driven development:

```bash
# Start monitoring GitHub Issues
soba start

# Available slash commands in Claude Code:
/soba:plan       # Develop implementation plan
/soba:implement  # TDD implementation and PR creation
/soba:review     # Review Pull Request
/soba:revise     # Revise based on feedback
```

## Team Collaboration

### Sharing Configuration

The initialization state is determined by the presence of `compose.yaml` (gitignored).
Configuration is embedded as comments in the generated file.

### Generated Files

These files are generated by init and gitignored:
- `.devcontainer/compose.yaml` - Docker Compose configuration
- `.devcontainer/devcontainer.local.json` - VS Code port forwarding

## Troubleshooting

### "Project not initialized" Error
Run `.devcontainer/bin/init` before opening in DevContainer.

### Port Conflicts
1. Check which ports are in use: `lsof -i :3000`
2. Reinitialize with different ports: `.devcontainer/bin/init`

### Rebuild Container
```bash
# VS Code
Ctrl+Shift+P → "Dev Containers: Rebuild Container"

# CLI
devcontainer rebuild --workspace-folder .
```

## Customization

### Adding Dependencies

Edit `.devcontainer/devcontainer.json`:
```json
"features": {
  "ghcr.io/devcontainers/features/python:1": {},
  "ghcr.io/devcontainers/features/rust:1": {}
}
```

### Environment Variables

Add to `.devcontainer/compose.yaml.template` before running init:
```yaml
services:
  app:
    environment:
      - NODE_ENV=development
```

## License

MIT License - See [LICENSE](LICENSE) file for details.

## Contributing

1. Fork this template repository
2. Create your feature branch
3. Submit a Pull Request with your improvements

## Support

- [Report Issues](https://github.com/yourusername/develop-skeleton-with-soba/issues)
- [Soba Documentation](https://github.com/douhashi/soba)
- [DevContainers Documentation](https://containers.dev/)
